<!--
 * @Author: your name
 * @Date: 2019-12-18 20:55:31
 * @LastEditTime : 2020-01-14 00:27:00
 * @LastEditors  : Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \beixiang_ly\ly_restart\1_js\1_readme4_1_内存地址.md
 -->

# 内存地址是一种用于软件及硬件等不同层级中的数据概念，用来访问电脑主存中的数据。

* 作用
    - 8086实模式：
        1. CPU复位（reset）或加电（power on）的时候以实模式启动，处理器以实模式工作。
        2. 在实模式下，内存寻址方式和8086相同，由16位段寄存器的内容乘以16（10H）当做段基地址，加上16位偏移地址形成20位的物理地址，最大寻址空间1MB，最大分段64KB。可以使用32位指令，32位的x86 CPU用做高速的8086。
        3. 在实模式下，所有的段都是可以读、写和可执行的。
    - 在8086的实模式下，把某一段寄存器左移4位，然后与地址ADDR相加后被直接送到内存总线上，这个相加后的地址就是内存单元的物理地址，而程序中的这个地址就叫逻辑地址（或叫虚地址）。在80386的保护模式下，这个逻辑地址不是被直接送到内存总线，而是被送到内存管理单元（MMU）。MMU由一个或一组芯片组成，其功能是把逻辑地址映射为物理地址，即进行地址转换。 
* 地址区分
    - 当使用80386【Intel 80386是英特尔公司于1985年10月17日发布的cpu。它是80x86系列中的第一种32位微处理器，】时，我们必须区分以下三种不同的地址：
        1. 逻辑地址：机器语言指令仍用这种地址指定一个操作数的地址或一条指令的地址。这种寻址方式在Intel的分段结构中表现得尤为具体，它使得MS-DOS或Windows程序员把程序分为若干段。每个逻辑地址都由一个段和偏移量组成。
        2. 线性地址：针对32位CPU，线性地址是一个32位的无符号整数，可以表达高达232（4GB）的地址。通常用16进制表示线性地址，其取值范围为0x00000000～0xffffffff。对64位CPU，线性地址是一个64位的无符号整数，可以表达高达264。
        3. 物理地址：也就是内存单元的实际地址，用于芯片级内存单元寻址。物理地址也由32位无符号整数表示。
* 内存地址类型
    - 内存地址有许多类型。换句话说，一个电脑，甚至在一个程序内，可能即存在数个不同的内存“定址空间”。
    - 电脑的内存（尤其是指主存）是由许多“内存地址”所组成的，每个内存地址都有一个“物理地址”，能供CPU（或其他设备）访问。一般，只有如BIOS、操作系统及部分特定之公用软件（如内存测试软件）等系统软件，能使用机器码的运算对象或寄存器对物理地址定址，指示CPU要求内存控制器之类的硬件设备，使用内存总线或系统总线，亦或分别之控制总线、地址总线及数据总线，运行该程序之命令。内存控制器的总线是由数条并行的-线路所组成的，每条线路表示一个比特。总线的宽度因此依电脑不同，决定了可定址之存储单位数量，以及每一单位内的比特数量。
    - 计算机程序使用内存地址来运行机器码、存储及截取数据。大多数的应用程序无法得知实际的物理地址，而是使用电脑的内存管理单元及操作系统的内存映射，为“逻辑地址”或虚拟地址定址。
* MMU理解
    - MMU是一种硬件电路，它包含两个部件，一个是分段部件，一个是分页部件，在本书中，我们把它们分别叫做分段机制和分页机制，以利于从逻辑的角度来理解硬件的实现机制。分段机制把一个逻辑地址转换为线性地址；接着，分页机制把一个线性地址转换为物理地址。


* CPU 内部从逻辑上可以分成三个模块，分别为 控制单元 ， 运算单元 ， 存储单元
    1. 控制单元： 
        - 控制单元是CPU的指挥中心，它控制着CPU内部任何时刻都在发生着什么。他的工作流程可以简述如下：
            1. 提取。 从内存或高速缓冲存储器中取出指令。
            2. 解码。 指令译码。
            3. 运行。 如果有必要，从内存中获取数据。
            4. 写回。 将最终的运算结果写回。
    2. 运算单元：
        - 运算单元包括算数逻辑运算单元ALU（Arithmetic andLogic Unit） 和 的浮点运算单元FPU（Floating Point Unit）
        - 在控制单元的控制下，可完成加， 减， 乘， 除 四则运算和各种逻辑运算。 
    3. 存储单元： 
        - CPU的存储单元去其实指的是寄存器组和片内缓存，是CPU中暂时存放数据的地方，里面保存着那些等待处理的数据，或已经处理过的数据。寄存器一般分为 专用寄存器 和 通用寄存器。
